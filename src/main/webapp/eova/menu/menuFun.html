<%layout("/eova/layout/default.html",{'title' : 'Dialog' }){%>
<style>
#myForm span{
border: 1px solid #BBD4FE;
padding: 3px;
background-color: #EAF2FF;
margin: 5px;
border-radius:5px;
}
#myForm input {
	height: 20px;
	width: 20px;
	vertical-align: middle;
}
</style>
<form id="myForm" method="post" class="form">
	<table class="table" style="width: 100%;">
		<tr>
			<th style="width: 200px;">主表功能</th>
			<td>
				<table>
					<tr style="line-height: 22px;">
						<td><label><span>新增</span><input type="checkbox" id="isAdd" name="isAdd" value="true" ${isTrue(isAdd!) ? 'checked' : ''} /></label> </td>
						<td><label><span>修改</span><input type="checkbox" id="isUpdate" name="isUpdate" value="true" ${isTrue(isUpdate!) ? 'checked' : ''} /></label> </td>
						<td><label><span>删除</span><input type="checkbox" id="isDelete" name="isDelete" value="true" ${isTrue(isDelete!) ? 'checked' : ''} /></label> </td>
						<td><label><span>导入</span><input type="checkbox" id="isImport" name="isImport" value="true" ${isTrue(isImport!) ? 'checked' : ''} /></label> </td>
					</tr>
				</table>
			</td>
		</tr>
		<%if(menu.type == 'masterSlaveGrid'){%>
		<tr>
			<th style="width: 200px;">子表功能</th>
			<td>
				<table>
					<tr style="line-height: 22px;">
						<td><label><span>新增</span><input type="checkbox" id="isSlaveAdd" name="isSlaveAdd" value="true" ${isTrue(isSlaveAdd!) ? 'checked' : ''}  /></label> </td>
						<td><label><span>修改</span><input type="checkbox" id="isSlaveUpdate" name="isSlaveUpdate" value="true" ${isTrue(isSlaveUpdate!) ? 'checked' : ''}  /></label> </td>
						<td><label><span>删除</span><input type="checkbox" id="isSlaveDelete" name="isSlaveDelete" value="true" ${isTrue(isSlaveDelete!) ? 'checked' : ''}  /></label> </td>
					</tr>
				</table>
			</td>
		</tr>
		<%}%>
	</table>
<pre>

	说明：
	本功能用于控制，某业务是否可以开放某些功能
	单表一排按钮，主子表两排按钮，和界面工具栏对应！
	
	举个栗子：
	【用户管理】一般用户都是由前台注册产生，所以不应该在后台提供新增功能。
	所以就不要勾选新增，然后分配权限时就不存在新增功能，自然用户也无法看到该功能。
</pre>
<br>
<pre style="color: red;">
	新手提示：
	按钮对于用户是否可见，由角色权限控制 
	系统会默认给admin帐号分配权限，其它帐号需手工分配
	【系统管理】>【角色管理】>【权限分配】
</pre>
</form>
<script type="text/javascript">
var fm = $('#myForm');
var submitNow = function($dialog, $grid, $pjq) {
	var url = "/menu/menuFun/${menu.code}";
	$.post(url, sy.serializeObject(fm), function(result) {
		if (result.success) {
			$.slideMsg("操作成功！", $pjq);
			$grid.datagrid('load');
			$dialog.dialog('destroy');
		} else {
			$pjq.messager.alert('提示', result.msg, 'error');
		}
	}, 'json');
};
var submitForm = function($dialog, $grid, $pjq) {
	if (fm.form('validate')) {
		submitNow($dialog, $grid, $pjq);
	}
};
</script>


<%}%>
